---
title: "Rails ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ Github Codespaces ã§å‹•ã‹ã™ã«ã¯"
emoji: "ğŸ«"
type: "tech"
topics:
  - "github"
  - "rails"
  - "ruby"
published: false
---

ã“ã®è¨˜äº‹ã§ã¯ã€ Rails ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ Github Codespaces ã§å‹•ä½œã•ã›ã‚‹ã“ã¨ã‚’ãƒˆãƒ©ã‚¤ã—ã¦ã„ã‚‹å†…å®¹ã§ã™ã€‚

# çµè«–ã‚’å…ˆã«

- Rails ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ Github Codespaces ã§å‹•ã‹ã™ã«ã¯ `--devcontainer` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ãŸ `rails new` ã®æ§‹æˆã§ãŠãŠã‚ˆãå‹•ã
- ãŸã ã—ã€ `localhost` ã§ã¯ãªã„ãƒ‰ãƒ¡ã‚¤ãƒ³åã§ã®ã‚¢ã‚¯ã‚»ã‚¹ãªã®ã§ã€ `config.hosts` ã®èª¿æ•´ã‚’è¦ã™ã‚‹
    - (ã“ã®ç‚¹ã¯ codespace ã§ãªãã¦ã‚‚åŒæ§˜)
- codespace ç‹¬è‡ªã®å•é¡Œã¨ã—ã¦ã€HTTP Origin ãƒ˜ãƒƒãƒ€ã«ã‚ˆã‚‹ã‚µã‚¤ãƒˆã®ã‚ªãƒªã‚¸ãƒ³ãƒã‚§ãƒƒã‚¯ã«ã²ã£ã‹ã‹ã‚‹ã®ã§  `config.action_controller.forgery_protection_origin_check` ã‚’ `false` ã«æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹
    - (2025/04/23 æ™‚ç‚¹ã®æ§‹æˆ)
- 2025/04/23 ç¾åœ¨ GitHub Codespaces ã®ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®è¨­å®šã«é–¢ã—ã¦ä¸€ç™–ã‚ã‚Šã€åˆæœŸå€¤ã® Private çŠ¶æ…‹ã‹ã‚‰ä¸€æ—¦ Public -> Private ã¨å¤‰æ›´ã—ãŸã‚‰ãªãœã‹ Private (è‡ªåˆ†ã ã‘)ã‚¢ã‚¯ã‚»ã‚¹ãŒæ©Ÿèƒ½ã™ã‚‹

# ä¸Šè¨˜çµè«–ä»¥å¤–ã§ä¼ãˆãŸã„ã“ã¨

ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§é–‹ç™ºç’°å¢ƒã‚’æ°—è»½ã«ä½“é¨“ã§ãã‚‹ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ç’°å¢ƒã¨ã—ã¦ Github Codespaces ã¯è‰¯ã„é¸æŠã ã¨æ€ã„ã¾ã™ã€‚å½“ç„¶ãã®ã¾ã¾å®Ÿè¡Œã‚‚ã§ãã¾ã™ã€‚
Rails ã§è¤‡æ•°ã® ActiveRecord ãƒ¢ãƒ‡ãƒ«ã‚’å†…åŒ…ã—ã€ã‚ãŸã‹ã‚‚ãã‚Œã‚‰ãŒã²ã¨ã¤ã®ãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚‹ã‚ˆã†ã«æŒ¯ã‚‹èˆã†ã“ã¨ã“ã¨ã‚’æä¾›ã™ã‚‹ gem ã¨ã—ã¦ [active_record_compose](https://github.com/hamajyotan/active_record_compose) ã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚
ã“ã‚Œã‚’ã€å®Ÿéš›ã«è©¦ã™ãŸã‚ã®ç’°å¢ƒã‚’ç”¨æ„ã—ã¦ã„ã‚‹ã®ã§ã‚ˆã‘ã‚Œã°ã•ã‚ã£ã¦ã¿ã¦ãã ã•ã„ã€‚

https://github.com/hamajyotan/active_record_compose
https://github.com/hamajyotan/active_record_compose-example

ã¾ãŸã€ã“ã® gem ãã®ã‚‚ã®ã«ã¤ã„ã¦ã¯ä»¥ä¸‹ã«è¨˜äº‹ã‚’ãŠã„ã¦ã„ã¾ã™ã€‚

https://zenn.dev/hamajyotan/articles/3e618ed8b6d22b

# GitHub Codespaces ã¨ã¯

github ãŒæä¾›ã—ã¦ã„ã‚‹ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ™ãƒ¼ã‚¹ã®é–‹ç™ºç’°å¢ƒã§ã™ã€‚
https://github.com/features/codespaces

ãƒ–ãƒ©ã‚¦ã‚¶ã²ã¨ã¤ã§é–‹ç™ºã‚’å§‹ã‚ã‚‰ã‚Œã‚‹ç’°å¢ƒã§ã™ã€‚
ãƒ–ãƒ©ã‚¦ã‚¶ç‰ˆã® VS Code (github.dev) ã¯åŸºæœ¬çš„ã«ã‚¨ãƒ‡ã‚£ã‚¿ã ã‘ã§ã‚ã‚Šã€å®Ÿéš›ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•ä½œã•ã›ã‚‹ç’°å¢ƒãŒæƒã†ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ä¸€æ–¹ Github Codespaces ã¯ã‚¨ãƒ‡ã‚£ã‚¿ã ã‘ã§ã¯ãªãã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•ä½œã•ã›ã‚‹ç’°å¢ƒãŒã¡ã‚ƒã‚“ã¨å‹•ãã¾ã™ã€‚

GitHub ã®ãƒ¦ãƒ¼ã‚¶ã«å¯¾ã—ã€ 15 gb/æœˆ ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ ãŠã‚ˆã³ 120ã‚³ã‚¢æ™‚é–“ã®ç„¡æ–™æ ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚ã¾ãŸã€ GitHub Pro ãƒ¦ãƒ¼ã‚¶ã®å ´åˆã¯ 20 gb/æœˆ ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ ãŠã‚ˆã³ 180ã‚³ã‚¢æ™‚é–“ã§ã™ã€‚
ã¾ãŸã€codespace ã¯30åˆ†æ”¾ç½®ã§ã‚¢ã‚¤ãƒ‰ãƒ«ã«ã€30æ—¥æ”¾ç½®ã§å‰Šé™¤ã•ã‚Œã¾ã™ã€‚ã“ã®æ™‚é–“ã¯è¨­å®š https://github.com/settings/codespaces ã§å¤‰æ›´å¯èƒ½ã§ã™ã€‚

https://docs.github.com/ja/billing/managing-billing-for-your-products/managing-billing-for-github-codespaces

# Rails ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ Github Codespaces ã§å‹•ã‹ã™

## `--devcontainer` ã‚ªãƒ—ã‚·ãƒ§ãƒ³

Rails ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ–°ã—ãç”¨æ„ã™ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ `rails new` ã«ã¯ `--devcontainer` ã¨ã„ã†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚
ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ã¦å®Ÿè¡Œã™ã‚‹ã¨ã€ `.devcontainer/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã‚‚ã¨ã«ã„ãã¤ã‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã¦ã„ã¾ã™ã€‚

```console
$ rails new sample --devcontainer
$ cd sample/
$ ls .devcontainer/
compose.yaml  devcontainer.json  Dockerfile
```

ã“ã‚Œã‚‰ãŒä½œæˆã•ã‚Œã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ VS Code ã® dev container ã§é–‹ç™ºç’°å¢ƒã‚’é–‹ãã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
ã“ã“ã§ã¯è©³ç´°ã¯çœç•¥ã—ã¾ã™ãŒã€ GitHub Codespaces ã§ã®èµ·å‹•ã§ã‚‚ã“ã®æ§‹æˆã‚’ä½¿ã„ã¾ã™ã€‚

## GitHub Codespaces ã§é–‹ã„ã¦ã¿ã‚‹

ä¸€åº¦ rails new ã‚’å®Ÿæ–½ã—ãŸçŠ¶æ…‹ã‹ã‚‰ first commit ã‚’å…¥ã‚Œã¦ GitHub ã®ãƒªãƒã‚¸ãƒˆãƒªã« push ã—ã¾ã™ã€‚
ãã®å¾Œã€ https://codespaces.new/OWNER/REPO ã® URL ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ã§ Github Codespaces ã§ã®èµ·å‹•ã‚’ç¢ºèªã™ã‚‹ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã¾ã™

ã¾ãŸã€ä½™è«‡ã§ã™ãŒ `README.md` ã«ä»¥ä¸‹ã®ã‚ˆã†ãªè¨˜è¿°ã‚’å…¥ã‚Œã‚‹ã“ã¨ã§ãƒªãƒ³ã‚¯ã‚’é…ç½®ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

```
[![Open in GitHub Codespaces](https://github.com/codespaces/badge.svg)](https://codespaces.new/OWNER/REPO)
```

ä»¥ä¸‹ã®ã‚ˆã†ãªè¡¨ç¤ºã«ãªã‚Šã¾ã™ã€‚

[![Open in GitHub Codespaces](https://github.com/codespaces/badge.svg)](https://codespaces.new/OWNER/REPO)

:::message
OWNER ãŠã‚ˆã³ REPO ã®ç®‡æ‰€ã¯é©å®œèª­ã¿æ›¿ãˆã¦ãã ã•ã„
:::

## codespace ä¸Šã§ã®æ“ä½œ

èµ·å‹•ã—ã¦ã—ã°ã‚‰ãæ”¾ç½®ã—ã¦ã„ã‚‹ã¨ã€ `bin/setup --skip-server` ãŒã‚³ãƒ³ã‚½ãƒ¼ãƒ«ä¸Šã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚
ã“ã‚Œã¯ã€ `--devcontainer` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ã¦ `rails new` ã—ãŸã“ã¨ã§ä½œæˆã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦‹ã‚‹ã¨ã“ã®è¨­å®šã®è¨˜è¿°ãŒç¢ºèªã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚

```json:.devcontainer/devcontainer.json
  // Use 'postCreateCommand' to run commands after the container is created.
  "postCreateCommand": "bin/setup --skip-server"
```

setup ã‚’çµ‚ãˆãŸã‚‰ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‹ã‚‰ `rails s` ã§èµ·å‹•ã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚

```console
rails s
```

## codespace ã§ã®ãƒãƒ¼ãƒˆè»¢é€ã®è¨­å®š

GitHub Codespaces ã«ã¯ã€ codespace ã®ä¸­ã§å‹•ã‹ã™ Rails ã‚µãƒ¼ãƒã® `http://localhost:3000` ã«å¯¾ã—ã¦å¤–éƒ¨ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ã™ã‚‹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®ä»•çµ„ã¿ãŒã‚ã‚Šã¾ã™ã€‚

https://docs.github.com/ja/codespaces/developing-in-a-codespace/forwarding-ports-in-your-codespace

æ—¢å®šã§ã€ãƒãƒ¼ãƒˆã®è¡¨ç¤ºç¯„å›²ã« Private ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã®ã§ã™ãŒã“ã®å ´åˆã¯è‡ªèº«ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ GitHub ã«ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã§ã‚ã‚Œã°ç›´æ¥ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚
ã€‚ã€‚ã€‚ãŒã€ç¾æ™‚ç‚¹ã§ã¯åˆæœŸçŠ¶æ…‹ã‹ã‚‰ãªã‚“ã‚‰ã‹ã®å¤‰æ›´ã‚’ã—ãªã„ã¨ãªãœã‹ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã›ã‚“ã€‚
æ—¢å®šãŒ Private ãªã®ã§ Private ã‚’ç¶­æŒã—ãŸçŠ¶æ…‹ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã«ã¯ Private -> Public -> Private ã¨å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

:::message
ã“ã®ã€ä¸€æ—¦å¤‰æ›´ã—ãªã„ã¨ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒæ©Ÿèƒ½ã—ãªã„ã¨ã„ã†æŒ™å‹•ã«ã¤ã„ã¦ãƒ¬ãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚
https://github.com/orgs/community/discussions/156546

ãƒ¬ãƒãƒ¼ãƒˆã®è§£æ±ºã®ä»•æ–¹ã«ã‚ˆã£ã¦ã¯ã€ä¸Šè¨˜ãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ©ã‚¦ãƒ³ãƒ‰ã¯å°†æ¥ä¸è¦ã«ãªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
:::

## Blocked hosts ã‚¨ãƒ©ãƒ¼ã‚’è§£æ±ºã™ã‚‹

ã“ã®çŠ¶æ…‹ã§ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ã€ã‚¨ãƒ©ãƒ¼ãŒç”Ÿã˜ã¾ã™ã€‚

![](/images/blocked-hosts.png)

```
Blocked hosts: symmetrical-spoon-6vxqqgxx4cr6qq-3000.app.github.dev
To allow requests to these hosts, make sure they are valid hostnames (containing only numbers, letters, dashes and dots), then add the following to your environment configuration:
    config.hosts << "symmetrical-spoon-6vxqqgxx4cr6qq-3000.app.github.dev"

For more details view: the Host Authorization guide
```

ã“ã‚Œã‚’è§£æ±ºã™ã‚‹ã«ã¯ã€è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã« `config.hosts` ã«ãƒ›ã‚¹ãƒˆåã‚’åŠ ãˆã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
GitHub Codespaces ã§å®Ÿè¡Œã™ã‚‹éš›ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ç’°å¢ƒå¤‰æ•°ã‚’ä½¿ã„ã¾ã™ã€‚

```ruby:config/environments/development.rb

Rails.application.configure do
  if ENV["CODESPACES"] == "true"
    # ä»¥ä¸‹ã¯ codespace ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’ hosts ã«åŠ ãˆã¦ã„ã¾ã™ã€‚
    # åˆ¥è§£ã¨ã—ã¦ã€é¢å€’ã§ã‚ã‚Œã° config.hosts.clear ã—ã¦ã—ã¾ã†ã¨ã„ã†æ‰‹ã‚‚ã‚ã‚Šã¾ã™ã€‚ 
    #
    codespaces_port_forwarding_domain = ENV["GITHUB_CODESPACES_PORT_FORWARDING_DOMAIN"]
    codespace_name = ENV["CODESPACE_NAME"]
    host = "#{codespace_name}-3000.#{codespaces_port_forwarding_domain}"

    config.hosts << host
  end

  # ä»¥ä¸‹çœç•¥
```

`config/environments/development.rb` ã‚’ä¿®æ­£å¾Œã€èµ·å‹•ã•ã›ã¦ã„ã‚‹ `rails s` ã‚’ä¸€åº¦æ­¢ã‚ã¦å†åº¦å‹•ã‹ã—ã€
æ”¹ã‚ã¦ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ç„¡äº‹ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚

## POST ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒå‡¦ç†ã§ããªã„

ä¸Šè¨˜ã¾ã§ã®æ‰‹é †ã§ã€ GitHub Codespaces ã§ Rails ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒå‹•ä½œã—ã¾ã™ã€‚
ãŒã€å®Ÿã¯ã¾ã  GET ãƒªã‚¯ã‚¨ã‚¹ãƒˆã ã‘ã—ã‹å‡¦ç†ã§ããšã€ POST ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚

```
ActionController::InvalidAuthenticityToken (HTTP Origin header (http://localhost:3000) didn't match request.base_url (https://symmetrical-spoon-6vxqqgxx4cr6qq-3000.app.github.dev)):
```

ã“ã‚Œã¯å®Ÿéš›ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã® URL ã«å¯¾ã—ã€ Http Origin Header ã®å†…å®¹ãŒã‚¢ãƒ³ãƒãƒƒãƒã‚†ãˆã«ç”Ÿã˜ã¦ã„ã‚‹ã‚‚ã®ã§ã™ã€‚

```
(ruby) request.base_url
"https://symmetrical-spoon-6vxqqgxx4cr6qq-3000.app.github.dev"
(ruby) request.origin
"http://localhost:3000"
(rdbg)
```

ã—ã‹ã—ãªãŒã‚‰ã€ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ã¯ãŸã—ã‹ã« Origin Header ã¯ç¾åœ¨ã‚¢ã‚¯ã‚»ã‚¹ä¸­ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã«åŸºã¥ã„ãŸå€¤ãŒé€å‡ºã•ã‚Œã¦ã„ã¾ã™ã€‚

![](/images/origin-header.png)

ã“ã‚Œã¯ã€ã©ã†ã‚„ã‚‰ GitHub Codespaces ãŒãƒãƒ¼ãƒˆã‚’å¤–éƒ¨è§£æ”¾ã™ã‚‹ãŸã‚ã®é–“ã«å­˜åœ¨ã™ã‚‹ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®ä¸­ã§ Origin ãƒ˜ãƒƒãƒ€ãŒæ›¸ãæ›ãˆã‚‰ã‚Œã¦ã„ã‚‹ã¨æ€ã‚ã‚Œã¾ã™ã€‚
æœ¬ä»¶ã«ã¤ã„ã¦ã¯ã€ãƒ¬ãƒãƒ¼ãƒˆã—ã¦ã¿ã¦ã„ã‚‹ã®ã§

https://github.com/orgs/community/discussions/156532

## GitHub Codespaces ã§ã®ç’°å¢ƒã«é™ã‚Š POST ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒå‡¦ç†ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹

:::message
Origin ãƒ˜ãƒƒãƒ€ãŒæ›¸ãæ›ã‚ã‚‹ä»¶ã«ã¤ã„ã¦ã€ãƒ¬ãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚
https://github.com/orgs/community/discussions/156532

ãƒ¬ãƒãƒ¼ãƒˆã®è§£æ±ºã®ä»•æ–¹ã«ã‚ˆã£ã¦ã¯ã€ä»¥ä¸‹ã«è¨˜è¼‰ã—ã¦ã„ã‚‹ãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ©ã‚¦ãƒ³ãƒ‰ã¯å°†æ¥ä¸è¦ã«ãªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
:::

ã“ã®ãƒã‚§ãƒƒã‚¯ã¯ã€ Rails ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®šå€¤ `config.action_controller.forgery_protection_origin_check` ã«ã‚ˆã‚Šå‹•ä½œã—ã¦ã„ã¾ã™ã€‚

[3.9.8 config.action_controller.forgery_protection_origin_check](https://railsguides.jp/configuring.html#config-action-controller-forgery-protection-origin-check)
> CSRFã®è¿½åŠ å¯¾ç­–ã¨ã—ã¦ã€HTTPã®Originãƒ˜ãƒƒãƒ€ãƒ¼ãŒã‚µã‚¤ãƒˆã®originã¨ä¸€è‡´ã™ã‚‹ã“ã¨ã‚’ãƒã‚§ãƒƒã‚¯ã™ã¹ãã‹ã©ã†ã‹ã‚’è¨­å®šã—ã¾ã™ã€‚

æœ¬æ¥ã¯æ—¢å®šå€¤ã‚’å¯èƒ½ãªé™ã‚Šæœ‰åŠ¹ãªçŠ¶æ…‹ã§å‹•ä½œã•ã›ãŸã„ã¨ã“ã‚ã§ã™ãŒã€ GitHub Codespaces ã§å‹•ä½œã•ã›ã‚‹å ´åˆã«ã“ã®è¨­å®šå€¤ã‚’ç„¡åŠ¹åŒ–ã™ã‚‹ã‚ˆã†ã«èª¿æ•´ã—ã¾ã—ãŸã€‚

```diff ruby:config/environments/development.rb

 Rails.application.configure do
   if ENV["CODESPACES"]
     codespaces_port_forwarding_domain = ENV["GITHUB_CODESPACES_PORT_FORWARDING_DOMAIN"]
     codespace_name = ENV["CODESPACE_NAME"]
     host = "#{codespace_name}-3000.#{codespaces_port_forwarding_domain}"

     config.hosts << host
+
+    warn "Disabling the CSRF protection Origin header check in GitHub Codespaces"
+    config.action_controller.forgery_protection_origin_check = false
   end

```

ã“ã‚Œã«ã‚ˆã‚Šã€ POST ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ã¤ã„ã¦ã‚‚æœŸå¾…ã©ãŠã‚Šå‹•ä½œã™ã‚‹ã‚ˆã†ã«ã§ãã¾ã—ãŸï¼

# ã¾ã¨ã‚

- ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§é–‹ç™ºç’°å¢ƒã‚’æ°—è»½ã«ä½“é¨“ã§ãã‚‹ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ç’°å¢ƒã¨ã—ã¦ Github Codespaces ã¯è‰¯ã„é¸æŠã ã¨æ€ã„ã¾ã™ã€‚å½“ç„¶ãã®ã¾ã¾å®Ÿè¡Œã‚‚ã§ãã¾ã™ã€‚
- Rails ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•ã‹ã™ãŸã‚ã«ã¯å‰è¿°ã®ã¨ãŠã‚Šã„ãã¤ã‹ã®èª¿æ•´ãŒå¿…è¦ã§ã—ãŸã€‚ã¾ãŸã€ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®è¨­å®šã«ãƒã‚°ã£ã½ã„æŒ™å‹•ãŒã‚ã‚Šã¾ã™ãŒãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ©ã‚¦ãƒ³ãƒ‰ã‚‚ã‚ã‚Šã¾ã™ã€‚
